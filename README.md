# KMS æ–‡æ¡£çˆ¬è™«ç³»ç»Ÿ

ä¸€ä¸ªåŸºäº Scrapy çš„ Confluence KMS ç³»ç»Ÿçˆ¬è™«é¡¹ç›®ï¼Œå…·æœ‰å¼ºå¤§çš„æ–‡æ¡£å¤„ç†å’Œå†…å®¹ä¼˜åŒ–åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ” æ”¯æŒ Confluence ç³»ç»Ÿçš„è‡ªåŠ¨ç™»å½•è®¤è¯
- ğŸ“‘ è‡ªåŠ¨æŠ“å–æ–‡æ¡£å†…å®¹å’Œç»“æ„
- ğŸ“ æ™ºèƒ½å¤„ç†å¤šç§é™„ä»¶æ ¼å¼ï¼š
  - å›¾ç‰‡ OCR æ–‡å­—è¯†åˆ«
  - PDF æ–‡æ¡£è§£æ
  - Word æ–‡æ¡£å¤„ç†
  - PowerPoint æ¼”ç¤ºæ–‡ç¨¿æå–
- ğŸ¤– é›†æˆç™¾å· AI è¿›è¡Œå†…å®¹ä¼˜åŒ–
- ğŸ’¾ ç»“æ„åŒ–æ•°æ®è¾“å‡ºï¼ˆJSON æ ¼å¼ï¼‰

## ç¯å¢ƒè¦æ±‚

- Python >= 3.11
- ç³»ç»Ÿä¾èµ–ï¼š
  - Tesseract OCRï¼ˆç”¨äºå›¾ç‰‡æ–‡å­—è¯†åˆ«ï¼‰
  - LibMagicï¼ˆç”¨äºæ–‡ä»¶ç±»å‹æ£€æµ‹ï¼‰
  - Popplerï¼ˆç”¨äº PDF å¤„ç†ï¼‰

## å®‰è£…

1. å…‹éš†é¡¹ç›®å¹¶è¿›å…¥ç›®å½•ï¼š

```bash
git clone [é¡¹ç›®åœ°å€]
cd kms
```

2. åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š

```bash
python -m venv .venv
source .venv/bin/activate  # Linux/macOS
# æˆ–
.venv\Scripts\activate  # Windows
```

3. å®‰è£…ä¾èµ–ï¼š

```bash
pip install -r requirements.txt
```

4. é…ç½®ç¯å¢ƒå˜é‡ï¼š

```bash
cp .env.template .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥å¿…è¦çš„é…ç½®ä¿¡æ¯
```

## ä½¿ç”¨æ–¹æ³•

1. é…ç½®çˆ¬è™«å‚æ•°ï¼š

åœ¨ `main.py` ä¸­è®¾ç½®ç›®æ ‡ URL å’Œè®¤è¯ä¿¡æ¯ï¼š

```python
process.crawl(
    ConfluenceSpider,
    start_url='your-confluence-url'
)
```

2. è¿è¡Œçˆ¬è™«ï¼š

```bash
python main.py
```

çˆ¬å–çš„æ•°æ®å°†ä¿å­˜åœ¨ `output` ç›®å½•ä¸‹çš„ JSON æ–‡ä»¶ä¸­ã€‚

## é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ crawler/
â”‚   â”œâ”€â”€ core/         # çˆ¬è™«æ ¸å¿ƒé€»è¾‘
â”‚   â”œâ”€â”€ storage/      # æ•°æ®å­˜å‚¨æ¨¡å—
â”‚   â”œâ”€â”€ utils/        # çˆ¬è™«ä¸“ç”¨å·¥å…·
â”‚   â””â”€â”€ __init__.py
â”œâ”€â”€ config/
â”‚   â””â”€â”€ settings.py   # é…ç½®ä¸­å¿ƒ
â””â”€â”€ tests/            # æµ‹è¯•ç”¨ä¾‹
```

## å¼€å‘

å®‰è£…å¼€å‘ä¾èµ–ï¼š

```bash
pip install -e ".[dev]"
```

è¿è¡Œæµ‹è¯•ï¼š

```bash
pytest
```

## è®¸å¯è¯

MIT License